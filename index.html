<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Intersubjectivity — Öznelerarasılık</title>
 <!-- add icon link -->
  <link rel="icon" href="assets/teads-logo.ico"
    type="image/x-icon" />  
  
  <audio id="bg-music" preload="auto" src="audio/background.mp3"></audio>

  <!-- Preload fonts (OTF) -->
  <link rel="preload" href="fonts/BPdotsUnicase.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="fonts/Satoshi-Black.otf"   as="font" type="font/otf" crossorigin>
  <link rel="preload" href="fonts/Satoshi-Medium.otf"  as="font" type="font/otf" crossorigin>
  <link rel="preload" href="fonts/Satoshi-Light.otf"   as="font" type="font/otf" crossorigin> <!-- add this -->

  <style>
    /* App-wide color baseline: TRUE black */
    :root { color-scheme: dark; }
    html, body {
      margin: 0;
      height: 100%;
      background: #000; /* keep pure black for intro + grid */
      overflow: hidden;
    }

    /* Font faces */
    @font-face{
      font-family: 'BPdotsUnicase';
      src: url('fonts/BPdotsUnicase.otf') format('opentype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face{
      font-family: 'SatoshiBlack';
      src: url('fonts/Satoshi-Black.otf') format('opentype');
      font-weight: 900; /* Satoshi Black is typically 900 (ok if your file maps to 800) */
      font-style: normal;
      font-display: swap;
    }
    @font-face{
      font-family: 'SatoshiMedium';
      src: url('fonts/Satoshi-Medium.otf') format('opentype');
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }
    @font-face{
      font-family: 'SatoshiLight';
      src: url('fonts/Satoshi-Light.otf') format('opentype');
      font-weight: 300; /* Light is 300 */
      font-style: normal;
      font-display: swap;
    }

    /* Main grid canvas sits below the intro overlay */
    #c{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      z-index: 1;
    }

    /* Intro overlay canvas (warnings + typing), drawn first */
    #intro{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      z-index: 2;
      pointer-events: none;
    }

    .hidden{ display: none !important; }
  </style>

  <script>
  window.APP_LOOP = true;  // enable looping from intro → main → ending → intro again
  </script>

  <!-- Load order: grid engine -> intro -> orchestrator -->
  <script defer src="./app.main.js"></script>  <!-- exposes window.gridAPI + window.startMain -->
  <script defer src="./intro.js"></script>      <!-- exposes window.runIntro (warnings + typing) -->
  <script defer src="./ending.js"></script>  
  <script defer src="./app.js"></script>        <!-- orchestrates intro -> main -->

</head>
<body>
  <!-- Intro overlay (warnings + title typing) -->
  <canvas id="intro"></canvas>
  <!-- Main grid engine -->
  <canvas id="c"></canvas>
</body>
</html>
